# ============================================================================
# pnpm Configuration for PulseGrid Monorepo
# ============================================================================
# This file configures pnpm behavior for optimal monorepo development
# Each setting is chosen to ensure consistent, secure, and performant builds

# ============================================================================
# DEPENDENCY RESOLUTION SETTINGS
# ============================================================================

# Enable strict peer dependency resolution to catch version conflicts early
# Prevents silent failures when peer dependencies are mismatched
# Critical for micro-frontend architecture where shared dependencies must align
strict-peer-dependencies=true

# Always prefer packages from the workspace over external versions
# Ensures that @pulsegrid/* packages are always used from the monorepo
# Prevents accidentally using published versions instead of local development versions
prefer-workspace-packages=true

# Use highest version resolution strategy for better compatibility
# When multiple packages require different versions of the same dependency,
# pnpm will choose the highest version that satisfies all requirements
resolution-mode=highest

# ============================================================================
# WORKSPACE CONFIGURATION
# ============================================================================

# Enable linking of workspace packages during installation
# This creates symlinks between packages in the monorepo
# Essential for development workflow where changes in one package
# should immediately be available in consuming packages
link-workspace-packages=true

# ============================================================================
# PERFORMANCE OPTIMIZATION
# ============================================================================

# Custom store directory for pnpm cache
# Centralizes package storage for better disk usage and performance
# Can be customized per machine or CI environment
store-dir=~/.pnpm-store

# ============================================================================
# SECURITY SETTINGS
# ============================================================================

# Set audit level to moderate to catch security issues without being overly strict
# Balances security awareness with development velocity
# Can be set to 'high' for production environments
audit-level=moderate

# ============================================================================
# VERSION MANAGEMENT
# ============================================================================

# Enforce engine requirements specified in package.json files
# Prevents installation with incompatible Node.js or pnpm versions
# Ensures consistent development environment across team members
engine-strict=true

# ============================================================================
# REGISTRY CONFIGURATION
# ============================================================================

# Default registry configuration (commented out - uses npm registry by default)
# Uncomment and modify if using a private registry or different npm registry
# registry=https://registry.npmjs.org/

# For private packages, you might need:
# @pulsegrid:registry=https://your-private-registry.com/